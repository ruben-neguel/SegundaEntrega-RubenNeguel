---
import type { Guia } from '../../data/guias';
import { Image } from 'astro:assets';

export interface Props {
    guia: Guia;
}
const { guia } = Astro.props;

// asignar un color a la etiqueta
let dificultadTag = null;
if (guia.dificultad) {
    let color = 'bg-gray-400'; 
    if (guia.dificultad === 'Fácil') color = 'bg-green-500';
    if (guia.dificultad === 'Moderada') color = 'bg-yellow-500';
    if (guia.dificultad === 'Difícil') color = 'bg-red-500';
    dificultadTag = { texto: guia.dificultad, color: color };
}
---

   <!-- Contenedor principal -->

   <a href={`/guias/${guia.id}/`} class="block bg-white rounded-2xl shadow-lg overflow-hidden group transition-all duration-300 hover:shadow-2xl hover:-translate-y-2">
      <div class="relative overflow-hidden">
        
          {dificultadTag && (
              <span class:list={[
                  "absolute top-4 right-4 text-white text-xs px-3 py-1 rounded-full z-10 font-semibold",
                  dificultadTag.color
              ]}>
                  {dificultadTag.texto}
              </span>
          )}
        <!-- Imagen optimizada -->
        <Image 
            src={guia.imagen} 
            alt={`Imagen de ${guia.titulo}`} 
            class="w-full h-64 object-cover transition-transform duration-500 ease-in-out group-hover:scale-105"
            loading="lazy"
            quality="mid"
            widths={[400, 800]}
            sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw"
        />
      </div>
      <!-- contenido de la card -->
      <div class="p-6">
          <h3 class="font-bold text-xl text-gray-800">{guia.titulo}</h3>
        
          <p class="text-sm text-gray-500 font-normal mt-1">{guia.descripcion}</p>
        
          {guia.duracion && (
              <div class="flex items-center text-gray-600 mt-4 pt-4 border-t border-gray-100">
                  <i class="fas fa-clock text-sm text-green-700"></i>
                  <span class="ml-2 font-medium">{guia.duracion}</span>
              </div>
          )}
      </div>
  </a>